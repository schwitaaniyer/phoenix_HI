{% extends 'base.html' %}

{% block title %}Rule{% endblock title %}

{% block body %}
<div class="container-fluid px-0">
    <form method="post" action="{% url 'checker' %}">
        {% csrf_token %}
        
        
        <label for="actionDropdown">Select Action*:</label>
        <select id="actionDropdown" name="selectedAction" class="form-control">
            {% for option in static_action_options %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
        </select>
        
        <label for="serviceDropdown">Select Service*:</label>
        <select id="serviceDropdown" name="selectedService" class="form-control">
            {% for option in static_service_options %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
        </select>

        <label for="sourceDropdown">Select Source*:</label>
        <select id="sourceDropdown" name="selectedSource" class="form-control">
            {% for option in static_source_options %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
        </select>

        <label for="destinationDropdown">Select Destination*:</label>
                <select id="destinationDropdown" name="selectedDestination" class="form-control">
            {% for option in static_destination_options %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
        </select>



        <button type="submit">Submit</button>
    </form>

    <script>
        // Example JavaScript for handling form submission
        document.getElementById('serviceDropdown').addEventListener('change', function () {
            var form = this.form;
            var formData = new FormData(form);

            fetch(form.action, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);  // Display the server response
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</div>
{% endblock body %}
