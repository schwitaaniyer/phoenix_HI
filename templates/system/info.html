{% extends "base.html" %}

{% block title %}System Information{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-header">
                <h4>Hardware Information</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tbody>
                            <tr><th>Hostname</th><td id="sys-hostname"></td></tr>
                            <tr><th>OS</th><td id="sys-os"></td></tr>
                            <tr><th>Kernel</th><td id="sys-kernel"></td></tr>
                            <tr><th>Architecture</th><td id="sys-arch"></td></tr>
                            <tr><th>Boot Time</th><td id="sys-boot"></td></tr>
                            <tr><th>Uptime</th><td id="sys-uptime"></td></tr>
                            <tr><th>User</th><td id="sys-user"></td></tr>
                            <tr><th>IP Address</th><td id="sys-ip"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-header">
                <h4>CPU & Memory</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tbody>
                            <tr><th>Physical Cores</th><td id="cpu-phys"></td></tr>
                            <tr><th>Total Cores</th><td id="cpu-total"></td></tr>
                            <tr><th>CPU Usage</th><td id="cpu-usage"></td></tr>
                            <tr><th>Memory Used</th><td id="mem-used"></td></tr>
                            <tr><th>Memory Total</th><td id="mem-total"></td></tr>
                            <tr><th>Memory Usage</th><td id="mem-percent"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="card mb-4">
            <div class="card-header">
                <h4>Disk Usage</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tbody>
                            <tr><th>Total</th><td id="disk-total"></td></tr>
                            <tr><th>Used</th><td id="disk-used"></td></tr>
                            <tr><th>Free</th><td id="disk-free"></td></tr>
                            <tr><th>Usage</th><td id="disk-percent"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    fetch('/api/system/info/')
        .then(response => response.json())
        .then(data => {
            document.getElementById('sys-hostname').textContent = data.hostname;
            document.getElementById('sys-os').textContent = data.os;
            document.getElementById('sys-kernel').textContent = data.kernel;
            document.getElementById('sys-arch').textContent = data.architecture;
            document.getElementById('sys-boot').textContent = data.boot_time;
            document.getElementById('sys-uptime').textContent = data.uptime;
            document.getElementById('sys-user').textContent = data.user;
            document.getElementById('sys-ip').textContent = data.ip_address;
            document.getElementById('cpu-phys').textContent = data.cpu.physical_cores;
            document.getElementById('cpu-total').textContent = data.cpu.total_cores;
            document.getElementById('cpu-usage').textContent = data.cpu.usage_percent + '%';
            document.getElementById('mem-used').textContent = (data.memory.used / (1024*1024*1024)).toFixed(2) + ' GB';
            document.getElementById('mem-total').textContent = (data.memory.total / (1024*1024*1024)).toFixed(2) + ' GB';
            document.getElementById('mem-percent').textContent = data.memory.percent + '%';
            document.getElementById('disk-total').textContent = (data.disk.total / (1024*1024*1024)).toFixed(2) + ' GB';
            document.getElementById('disk-used').textContent = (data.disk.used / (1024*1024*1024)).toFixed(2) + ' GB';
            document.getElementById('disk-free').textContent = (data.disk.free / (1024*1024*1024)).toFixed(2) + ' GB';
            document.getElementById('disk-percent').textContent = data.disk.percent + '%';
        });
});
</script>
{% endblock %}